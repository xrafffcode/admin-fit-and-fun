import{P as h,r as k,Q as I,e as N,o as i,K as R,l as n,f as c,i as e,c as t,I as r,t as j,T as f,s as z,J as p,j as v,V as L,_ as O,M as P,$ as Y,L as $}from"./index-31daaf16.js";import{u as x}from"./attendance-fa885a46.js";import{u as y}from"./member-e189fca8.js";import{c as _}from"./permissionHelper-2b543738.js";import{b as w,d as J,e as K,a as d,V as Q}from"./VRow-281e71e9.js";import{V as q}from"./VDialog-3bd3c4ef.js";import{V as G}from"./VSelect-8cde19f0.js";import{V as b}from"./VTextField-fa88338a.js";import"./VGrid-f9b7f30a.js";import"./VOverlay-4d5b6a7d.js";import"./forwardRefs-5fcb3655.js";import"./VMenu-5921d0fa.js";import"./VChip-c0dd9028.js";const H=v("h2",{class:"mb-0"}," Attendances List ",-1),W=["onUpdate:modelValue","disabled","onChange"],ce={__name:"attendances",setup(X){const A=[{text:"Member",value:"member.name",width:200},{text:"Coach",value:"member.coach.name"},{text:"Exercise",value:"program.title",width:300},{text:"Shake",value:"shake.name",width:200},{text:"Tea",value:"tea"},{text:"Parking Ticket",value:"parking_ticket",width:150},{text:"Attended",value:"attended"},{text:"Action",value:"action"}],{attendances:C,loading:g,success:s}=h(x()),{fetchAttendances:u,deleteAttendance:D,absentAttendance:S}=x(),{members:M}=h(y()),{fetchMembers:T}=y(),o=k({member_id:"",start_date:new Date(new Date().getFullYear(),new Date().getMonth(),2).toISOString().slice(0,10),end_date:new Date(new Date().getFullYear(),new Date().getMonth()+1,1).toISOString().slice(0,10)});u(),T();async function U(m){confirm("Delete this attendance?")&&(await D(m.id),u())}const V=k("");async function B(m){return confirm("Apakah anda yakin mengubah status kehadiran?")&&(await S(m.id),u()),!1}return I(()=>{document.title="Attendances"}),(m,l)=>{const E=N("EasyDataTable");return i(),R($,null,[n(s)?(i(),c(q,{key:0,modelValue:n(s),"onUpdate:modelValue":l[1]||(l[1]=a=>z(s)?s.value=a:null),"max-width":"400"},{default:e(()=>[t(w,null,{default:e(()=>[t(J,null,{default:e(()=>[r(j(n(s)),1)]),_:1}),t(K,null,{default:e(()=>[t(f,{color:"primary",text:"",onClick:l[0]||(l[0]=()=>s.value=null)},{default:e(()=>[r(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):p("",!0),t(Q,null,{default:e(()=>[t(d,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:e(()=>[H,n(_)("attendance-create")?(i(),c(f,{key:0,to:{name:"attendance-create"},color:"primary"},{default:e(()=>[r(" Add Attendance ")]),_:1})):p("",!0)]),_:1}),t(d,{cols:"12",md:"3"},{default:e(()=>[t(G,{modelValue:o.value.member_id,"onUpdate:modelValue":l[2]||(l[2]=a=>o.value.member_id=a),items:n(M),"item-title":"name","item-value":"id",label:"Member",clearable:"",variant:"solo"},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12",md:"3"},{default:e(()=>[t(b,{modelValue:o.value.start_date,"onUpdate:modelValue":l[3]||(l[3]=a=>o.value.start_date=a),label:"Start Date",clearable:"",variant:"solo",type:"date"},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"3"},{default:e(()=>[t(b,{modelValue:o.value.end_date,"onUpdate:modelValue":l[4]||(l[4]=a=>o.value.end_date=a),label:"End Date",clearable:"",variant:"solo",type:"date"},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"3"},{default:e(()=>[v("button",{class:"btn btn-filter",onClick:l[5]||(l[5]=a=>n(u)(o.value))},[t(L,{icon:"mdi-magnify"}),r(" Filter ")])]),_:1}),t(d,{cols:"12"},{default:e(()=>[t(b,{modelValue:V.value,"onUpdate:modelValue":l[6]||(l[6]=a=>V.value=a),label:"Search Attendance",placeholder:"Search Attendance",clearable:"",loading:n(g),variant:"solo"},null,8,["modelValue","loading"])]),_:1}),t(d,{cols:"12"},{default:e(()=>[t(w,null,{default:e(()=>[t(E,{headers:A,items:n(C),loading:n(g),"search-value":V.value,"buttons-pagination":"","show-index":"",class:"data-table"},O({"item-operation":e(a=>[n(_)("attendance-edit")?(i(),c(f,{key:0,to:{name:"attendance-edit",params:{id:a.id}},color:"primary",size:"small",class:"m-5"},{default:e(()=>[r(" Edit ")]),_:2},1032,["to"])):p("",!0),n(_)("attendance-delete")?(i(),c(f,{key:1,color:"error",size:"small",class:"m-5",onClick:()=>U(a)},{default:e(()=>[r(" Delete ")]),_:2},1032,["onClick"])):p("",!0)]),_:2},[n(_)("attendance-absent")?{name:"item-attended",fn:e(a=>[P(v("input",{"onUpdate:modelValue":F=>a.is_attended=F,type:"checkbox",disabled:a.is_attended,onChange:()=>B(a)},null,40,W),[[Y,a.is_attended]])]),key:"0"}:void 0]),1032,["items","loading","search-value"])]),_:1})]),_:1})]),_:1})],64)}}};export{ce as default};

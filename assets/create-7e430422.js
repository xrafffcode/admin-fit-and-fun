import{P as p,r as w,w as k,Q as B,o as c,f as _,i as e,l as a,c as s,V as C,I as i,t as R,J as T,T as d,U as A,j as N}from"./index-31daaf16.js";import{u as f}from"./membership-1a132632.js";import{u as b}from"./member-e189fca8.js";import{V as U}from"./VAlert-6d252168.js";import{a as m,b as j,V}from"./VRow-281e71e9.js";import{V as F}from"./VForm-27224658.js";import{V as g}from"./VAutocomplete-1c70452f.js";import{V as I}from"./VTextField-fa88338a.js";import"./VGrid-f9b7f30a.js";import"./forwardRefs-5fcb3655.js";import"./VSelect-8cde19f0.js";import"./VMenu-5921d0fa.js";import"./VOverlay-4d5b6a7d.js";import"./VChip-c0dd9028.js";const $=N("h2",{class:"mb-0"}," Add Membership ",-1),Z={__name:"create",setup(D){const{loading:v,error:t}=p(f()),{createMembership:y}=f(),{members:M}=p(b()),{fetchMembers:S,loading:h}=b(),l=w({member_id:"",type:"",remaining_sessions:""}),u=()=>{l.value={member_id:"",type:"",remaining_sessions:""}},x=()=>{y(l.value)};return k(()=>l.value.type,n=>{n&&(l.value.remaining_sessions=n)}),B(()=>{document.title="Add Membership",S(),u(),t.value=null}),(n,o)=>(c(),_(V,null,{default:e(()=>[a(t)?(c(),_(U,{key:0,type:"warning",dismissible:"",class:"mb-4"},{close:e(()=>[s(C,{onClick:o[0]||(o[0]=r=>t.value=null)},{default:e(()=>[i(" $close ")]),_:1})]),default:e(()=>[i(R(a(t))+" ",1)]),_:1})):T("",!0),s(m,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:e(()=>[$,s(d,{to:{name:"memberships"},color:"primary"},{default:e(()=>[i(" Back ")]),_:1})]),_:1}),s(m,{cols:"12"},{default:e(()=>[s(j,null,{default:e(()=>[s(F,{onSubmit:A(x,["prevent"])},{default:e(()=>[s(V,null,{default:e(()=>[s(m,{cols:"12",md:"12"},{default:e(()=>[s(g,{modelValue:l.value.member_id,"onUpdate:modelValue":o[1]||(o[1]=r=>l.value.member_id=r),items:a(M),label:"Select Member","item-title":"name","item-value":"id","error-messages":a(t)&&a(t).member_id?[a(t).member_id]:[],loading:a(h)},null,8,["modelValue","items","error-messages","loading"])]),_:1}),s(m,{cols:"12",md:"12"},{default:e(()=>[s(g,{modelValue:l.value.type,"onUpdate:modelValue":o[2]||(o[2]=r=>l.value.type=r),items:["10","30"],"item-title":r=>r,label:"Select Type","error-messages":a(t)&&a(t).type?[a(t).type]:[]},null,8,["modelValue","item-title","error-messages"])]),_:1}),s(m,{cols:"12",md:"12"},{default:e(()=>[s(I,{modelValue:l.value.remaining_sessions,"onUpdate:modelValue":o[3]||(o[3]=r=>l.value.remaining_sessions=r),label:"Remaining Sessions",placeholder:"Remaining Sessions","error-messages":a(t)&&a(t).remaining_sessions?[a(t).remaining_sessions]:[]},null,8,["modelValue","error-messages"])]),_:1}),s(m,{cols:"12",class:"d-flex gap-4"},{default:e(()=>[s(d,{type:"submit",loading:a(v),color:"primary"},{default:e(()=>[i(" Save ")]),_:1},8,["loading"]),s(d,{color:"secondary",variant:"tonal",onClick:u},{default:e(()=>[i(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Z as default};

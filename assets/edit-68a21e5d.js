import{d as w,P as p,r as C,Q as N,o as S,f as k,i as o,c as e,T as n,I as d,U as P,l as s,j as T}from"./index-31daaf16.js";import{u as f}from"./role-3ad887d8.js";import{u as _}from"./permission-24160dbe.js";import{a as m,b as U,V}from"./VRow-281e71e9.js";import{V as j}from"./VForm-27224658.js";import{V as E}from"./VTextField-fa88338a.js";import{V as F}from"./VAutocomplete-1c70452f.js";import"./VGrid-f9b7f30a.js";import"./forwardRefs-5fcb3655.js";import"./VSelect-8cde19f0.js";import"./VMenu-5921d0fa.js";import"./VOverlay-4d5b6a7d.js";import"./VChip-c0dd9028.js";const I=T("h2",{class:"mb-0"}," Edit Role ",-1),Y={__name:"edit",setup(M){const v=w(),{loading:R,error:a}=p(f()),{fetchRole:g,updateRole:y}=f(),{permissions:h}=p(_()),{fetchPermissions:b}=_(),u=v.params.id,t=C({id:u,name:"",permissions:[]}),c=async()=>{try{const l=await g(u);t.value={id:l.id,name:l.name,permissions:l.permissions.map(r=>r.name)}}catch(l){console.error(l)}};N(()=>{document.title="Edit role",b(),c()});const x=()=>{y(t.value)},B=()=>{c()};return(l,r)=>(S(),k(V,null,{default:o(()=>[e(m,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:o(()=>[I,e(n,{to:{name:"roles"},color:"primary"},{default:o(()=>[d(" Back ")]),_:1})]),_:1}),e(m,{cols:"12"},{default:o(()=>[e(U,null,{default:o(()=>[e(j,{onSubmit:P(x,["prevent"])},{default:o(()=>[e(V,null,{default:o(()=>[e(m,{cols:"12",md:"12"},{default:o(()=>[e(E,{modelValue:t.value.name,"onUpdate:modelValue":r[0]||(r[0]=i=>t.value.name=i),label:"Name",placeholder:"Role Name","error-messages":s(a)&&s(a).name?[s(a).name]:[]},null,8,["modelValue","error-messages"])]),_:1}),e(m,{cols:"12",md:"12"},{default:o(()=>[e(F,{modelValue:t.value.permissions,"onUpdate:modelValue":r[1]||(r[1]=i=>t.value.permissions=i),items:s(h),label:"Choose Permissions",multiple:"","item-title":"name","item-value":"name","error-messages":s(a)&&s(a).permissions?[s(a).permissions]:[]},null,8,["modelValue","items","error-messages"])]),_:1}),e(m,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[e(n,{type:"submit",loading:s(R),color:"primary"},{default:o(()=>[d(" Save ")]),_:1},8,["loading"]),e(n,{type:"reset",color:"secondary",variant:"tonal",onClick:B},{default:o(()=>[d(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Y as default};

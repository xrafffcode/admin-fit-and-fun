import{P as n,H as j,d as A,r as F,Q as H,o as _,f,i as l,c as a,T as c,I as g,U as I,l as e,J as D,j as J}from"./index-31daaf16.js";import{u as V}from"./member-e189fca8.js";import{u as v}from"./coach-ae0d7c27.js";import{u as y}from"./goal-5d1a3b70.js";import{a as i,b as Q,V as w}from"./VRow-281e71e9.js";import{V as W}from"./VForm-27224658.js";import{V as u}from"./VTextField-fa88338a.js";import{V as C}from"./VAutocomplete-1c70452f.js";import"./VGrid-f9b7f30a.js";import"./forwardRefs-5fcb3655.js";import"./VSelect-8cde19f0.js";import"./VMenu-5921d0fa.js";import"./VOverlay-4d5b6a7d.js";import"./VChip-c0dd9028.js";const q=J("h2",{class:"mb-0"}," Member Edit ",-1),de={__name:"edit",setup(z){const{user:M}=n(j()),S=A(),{loading:m,error:o}=n(V()),{fetchMember:x,updateMember:N}=V(),{coaches:U}=n(v()),{fetchCoaches:B,loading:k}=v(),{goals:R}=n(y()),{fetchGoals:E,loading:T}=y(),h=S.params.id,t=F({id:h,name:"",phone_number:"",weight:"",height:"",coach_id:"",goal_id:""}),p=async()=>{try{const d=await x(h);t.value={id:d.id,name:d.name,phone_number:d.phone_number,weight:d.weight,height:d.height,coach_id:d.coach.id,goal_id:d.goal.id}}catch(d){console.error(d)}};H(()=>{document.title="Member Edit",p(),B(),E()});const G=()=>{N(t.value)},P=()=>{p()};return(d,s)=>(_(),f(w,null,{default:l(()=>[a(i,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:l(()=>[q,a(c,{to:{name:"members"},color:"primary"},{default:l(()=>[g(" Back ")]),_:1})]),_:1}),a(i,{cols:"12"},{default:l(()=>[a(Q,null,{default:l(()=>[a(W,{onSubmit:I(G,["prevent"])},{default:l(()=>[a(w,null,{default:l(()=>{var b;return[a(i,{cols:"12",md:"12"},{default:l(()=>[a(u,{modelValue:t.value.name,"onUpdate:modelValue":s[0]||(s[0]=r=>t.value.name=r),label:"Name",placeholder:"Member Name","error-messages":e(o)&&e(o).name?[e(o).name]:[],disabled:e(m),loading:e(m)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),a(i,{cols:"12",md:"12"},{default:l(()=>[a(u,{modelValue:t.value.phone_number,"onUpdate:modelValue":s[1]||(s[1]=r=>t.value.phone_number=r),label:"Phone Number",placeholder:"0812233456","error-messages":e(o)&&e(o).phone_number?[e(o).phone_number]:[],disabled:e(m),loading:e(m)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),a(i,{cols:"12",md:"12"},{default:l(()=>[a(u,{modelValue:t.value.weight,"onUpdate:modelValue":s[2]||(s[2]=r=>t.value.weight=r),label:"Weight",placeholder:"Enter numbers only","error-messages":e(o)&&e(o).weight?[e(o).weight]:[],disabled:e(m),loading:e(m)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),a(i,{cols:"12",md:"12"},{default:l(()=>[a(u,{modelValue:t.value.height,"onUpdate:modelValue":s[3]||(s[3]=r=>t.value.height=r),label:"Height",placeholder:"Enter numbers only","error-messages":e(o)&&e(o).height?[e(o).height]:[],disabled:e(m),loading:e(m)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),((b=e(M))==null?void 0:b.role)!=="coach"?(_(),f(i,{key:0,cols:"12",md:"12"},{default:l(()=>[a(C,{modelValue:t.value.coach_id,"onUpdate:modelValue":s[4]||(s[4]=r=>t.value.coach_id=r),items:e(U),label:"Select Coach","item-title":"name","item-value":"id","error-messages":e(o)&&e(o).coach_id?[e(o).coach_id]:[],loading:e(k)},null,8,["modelValue","items","error-messages","loading"])]),_:1})):D("",!0),a(i,{cols:"12",md:"12"},{default:l(()=>[a(C,{modelValue:t.value.goal_id,"onUpdate:modelValue":s[5]||(s[5]=r=>t.value.goal_id=r),items:e(R),label:"Select Program","item-title":"name","item-value":"id","error-messages":e(o)&&e(o).goal_id?[e(o).goal_id]:[],loading:e(T)},null,8,["modelValue","items","error-messages","loading"])]),_:1}),a(i,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[a(c,{type:"submit",loading:e(m),color:"primary"},{default:l(()=>[g(" Save ")]),_:1},8,["loading"]),a(c,{type:"reset",color:"secondary",variant:"tonal",onClick:P},{default:l(()=>[g(" Reset ")]),_:1})]),_:1})]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{de as default};

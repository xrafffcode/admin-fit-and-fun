import{d as R,P as w,r as B,Q as N,o as p,f,i as a,c as e,T as d,I as u,U,J as k,l as t,j as F}from"./index-31daaf16.js";import{u as _}from"./goal-5d1a3b70.js";import{V as I,h as P}from"./VFileInput-60a75874.js";import{a as m,b as T,V}from"./VRow-281e71e9.js";import{V as G}from"./VForm-27224658.js";import{a as S}from"./VGrid-f9b7f30a.js";import{V as j}from"./VTextField-fa88338a.js";import{V as D}from"./VTextarea-42a87be7.js";import"./forwardRefs-5fcb3655.js";import"./VChip-c0dd9028.js";const E=F("h2",{class:"mb-0"}," Edit Program ",-1),X={__name:"edit",setup(L){const v=R(),{loading:i,error:r}=w(_()),{fetchGoal:h,updateGoal:b}=_(),c=v.params.id,l=B({id:c,image:null,image_name:"",image_url:"",name:"",description:""}),g=async()=>{try{const o=await h(c);l.value={id:o.id,name:o.name,description:o.description,image:null,image_name:"",image_url:o.image_url}}catch(o){console.error(o)}};N(()=>{document.title="Edit Program",g()});const y=()=>{b(l.value)},x=o=>{P(o,l.value,"image"),l.value.image_url=URL.createObjectURL(o.target.files[0])},C=()=>{g()};return(o,s)=>(p(),f(V,null,{default:a(()=>[e(m,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:a(()=>[E,e(d,{to:{name:"goals"},color:"primary"},{default:a(()=>[u(" Back ")]),_:1})]),_:1}),e(m,{cols:"12"},{default:a(()=>[e(T,null,{default:a(()=>[e(G,{onSubmit:U(y,["prevent"])},{default:a(()=>[e(V,null,{default:a(()=>[e(m,{cols:"12",md:"12"},{default:a(()=>[l.value.image_url?(p(),f(S,{key:0,src:l.value.image_url,width:"100",height:"auto",class:"mb-4"},null,8,["src"])):k("",!0),e(I,{modelValue:l.value.image_name,"onUpdate:modelValue":s[0]||(s[0]=n=>l.value.image_name=n),label:"Image",placeholder:"Choose an image",accept:"image/*",onChange:x},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"12"},{default:a(()=>[e(j,{modelValue:l.value.name,"onUpdate:modelValue":s[1]||(s[1]=n=>l.value.name=n),label:"Name",placeholder:"Program Name","error-messages":t(r)&&t(r).name?[t(r).name]:[],disabled:t(i),loading:t(i)},null,8,["modelValue","error-messages","disabled","loading"])]),_:1}),e(m,{cols:"12",md:"12"},{default:a(()=>[e(D,{modelValue:l.value.description,"onUpdate:modelValue":s[2]||(s[2]=n=>l.value.description=n),label:"Description",placeholder:"Program Description","error-messages":t(r)&&t(r).name?[t(r).name]:[]},null,8,["modelValue","error-messages"])]),_:1}),e(m,{cols:"12",class:"d-flex gap-4"},{default:a(()=>[e(d,{type:"submit",loading:t(i),color:"primary"},{default:a(()=>[u(" Save ")]),_:1},8,["loading"]),e(d,{type:"reset",color:"secondary",variant:"tonal",onClick:C},{default:a(()=>[u(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{X as default};
